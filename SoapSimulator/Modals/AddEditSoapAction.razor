<EditForm Model="@Model" OnInvalidSubmit="Error" OnValidSubmit="Save">
    <DataAnnotationsValidator />
    <MudDialog>
        <DialogContent>
            <MudGrid>
                <MudItem xs="12">
                    <MudTextField ReadOnly="View" Variant="Variant.Outlined" @bind-Value="@Model.MethodName" Label="Method Name" For="()=>Model.MethodName" />
                </MudItem>
                <MudItem xs="12">
                    <MudText Align="Align.Center" Typo="Typo.h6">Request Format</MudText>
                    <MudDivider />
                    <MudTextField ReadOnly="View" Lines="6" @bind-Value="@Model.Request.Body" Variant="Variant.Outlined" Label="Enter sample request XML." />
                </MudItem>
                <MudItem xs="12">
                    <MudText Align="Align.Center" Typo="Typo.h6">Response Format</MudText>
                    <MudDivider />
                    <MudTextField ReadOnly="View" Required Lines="6" @bind-Value="@Model.Response.Body" Variant="Variant.Outlined" Label="Enter sample response  XML." />
                </MudItem>
            </MudGrid>
        </DialogContent>
        <DialogActions>
            <MudButton OnClick="()=>Dialog.Cancel()">Close</MudButton>
            <MudButton Disabled="View" ButtonType="ButtonType.Submit" StartIcon="@Icons.Material.Filled.Save" Color="Color.Success">Save</MudButton>
        </DialogActions>
    </MudDialog>
</EditForm>
@code {
    [CascadingParameter]
    MudDialogInstance Dialog { get; set; }
    [Parameter]
    public SoapAction? Model { get; set; }
    [Parameter]
    public bool View { get; set; }
    protected override void OnInitialized()
    {
        if (!View)
        {
            Model = new();
        }
    }
    void Error() => snackBar.Add("Fill in all required fields", Severity.Error);
    async Task Save()
    {
        Model.MethodName = Model.MethodName.Trim();
        if (string.IsNullOrEmpty(Model.Response.Body))
        {
            Error();
            return;
        }
        if (string.IsNullOrEmpty(Model.Request.Body))
        {
            Error();
            return;
        }
        Dialog.Close(Model);
    }
}
